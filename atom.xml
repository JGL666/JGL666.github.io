<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://jgl666.github.io</id>
    <title>JGL</title>
    <updated>2020-06-26T05:41:56.647Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://jgl666.github.io"/>
    <link rel="self" href="https://jgl666.github.io/atom.xml"/>
    <subtitle>温故而知新</subtitle>
    <logo>https://jgl666.github.io/images/avatar.png</logo>
    <icon>https://jgl666.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, JGL</rights>
    <entry>
        <title type="html"><![CDATA[quiz阅读笔记系列1]]></title>
        <id>https://jgl666.github.io/post/quiz-yue-du-bi-ji-1/</id>
        <link href="https://jgl666.github.io/post/quiz-yue-du-bi-ji-1/">
        </link>
        <updated>2020-06-26T01:30:10.000Z</updated>
        <content type="html"><![CDATA[<p><a href="https://dtolnay.github.io/rust-quiz/1">原文链接</a></p>
<h2 id="问题">问题</h2>
<pre><code>macro_rules! m {
    ($($s:stmt)*) =&gt; {
        $(
            { stringify!($s); 1 }
        )&lt;&lt;*
    };
}

fn main() {
    print!(
        &quot;{}{}{}&quot;,
        m! { return || true },
        m! { (return) || true },
        m! { {return} || true },
    );
}
</code></pre>
<br>
<h2 id="解析">解析</h2>
<h4 id="no1">NO1</h4>
<hr>
<p>表示匹配一个或者多个Rust语句</p>
<pre><code>($($s:stmt)*)
</code></pre>
<p>这是Rust匹配宏规则，stmt表示语句</p>
<pre><code>$s:stmt
</code></pre>
<h4 id="no2">NO2</h4>
<hr>
<p>Rust在宏中引用$s，表示引用匹配的变量。<br><br>
stringify!将引用的token转为字符串</p>
<pre><code>{ stringify!($s); 1 }
</code></pre>
<h4 id="no3">NO3</h4>
<hr>
<p>return || true 是一个表达式语句 返回一个闭包</p>
<pre><code> m! { return || true }
</code></pre>
<p>如下代码一样</p>
<pre><code>fn main() {
    fn get_f()-&gt;fn()-&gt;bool{
        return || true;
    }
    let f: fn()-&gt;bool = get_f();
    //true
    println!(&quot;{}&quot;,f());
}
</code></pre>
<h4 id="no4">NO4</h4>
<hr>
<p>(return) || true 是一个逻辑或表达式语句<br><br>
这里面都是表达式，整体作为一个表达式语句</p>
<pre><code> m! { (return) || true }
</code></pre>
<h4 id="no5">NO5</h4>
<hr>
<p>左边是一个块表达式语句，右边是一个闭包表达式语句<br><br>
这是两个语句</p>
<pre><code>m! { {return} || true }
</code></pre>
<br>
<h2 id="rust相关知识点">Rust相关知识点</h2>
<ul>
<li>Rust中的语句<br><br>
<a href="https://doc.rust-lang.org/reference/statements.html">官方文档</a><br><br>
<img src="https://jgl666.github.io/post-images/1593149001372.PNG" alt="" loading="lazy"><br>
<a href="https://doc.rust-lang.org/reference/items.html">Item</a>是包的组件，包括模块、函数、结构体等等。<br><br>
块表达式语句可以没有分号，例如{}或者unsafe{}都是块表达式语句。<br><br>
()是<a href="https://doc.rust-lang.org/reference/expressions/grouped-expr.html">分组表达式</a>，返回分组计算的结果。</li>
</ul>
]]></content>
    </entry>
</feed>